<!DOCTYPE html>
<html lang="en">
<%- include ('../layout/head') %>

<body>
    <%- include ('../layout/header') %>
    <main>
        <div class="book-section">
            <p>You have this many books in the Database: <%= homeArray.length %></p>
            <form action="/bookshelf?_method=PUT" method="POST">
                <select id="genre" name="authors">
                    <option value="">Find Books by Author</option>
                    <% let array = [] %>
                    <% homeArray.forEach(book => { %>
                    <% if(!array.includes(book.authors)){ %>
                    <option value="<%=book.authors%>">
                        <%=book.authors.split(',').join(', ')%></option>
                    <% array.push(book.authors) %>
                    <% } %>
                    <% },[]) %>
                </select>
                <button>Submit</button>
            </form>
            <form action="/bookshelf?_method=PUT" method="POST">
                <select id="genre" name="bookshelf">
                    <option value="">Find Books by Bookshelf</option>
                    <% let bsArray = [] %>
                    <% homeArray.forEach(book => { %>
                    <% if(!array.includes(book.bookshelf)){ %>
                    <option value="<%=book.bookshelf%>">
                        <%=book.bookshelf%></option>
                    <% bsArray.push(book.bookshelf) %>
                    <% } %>
                    <% },[]) %>
                </select>
                <button>Submit</button>
            </form>
            <%- include ('../layout/single-book') %>
        </div>
    </main>
    <%- include ('../layout/footer') %>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="../../js/app.js"></script>
</body>

</html>